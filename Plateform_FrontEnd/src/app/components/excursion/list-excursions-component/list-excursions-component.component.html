<div class="container">
  <h2>Excursions List</h2>

  <form [formGroup]="searchForm" (ngSubmit)="onSearch()">
    <div class="form-group">
      <label for="date">Date</label>
      <input id="date" type="date" formControlName="date" class="form-control" />
    </div>
    <div class="form-group">
      <label for="location">Location</label>
      <input id="location" formControlName="location" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary">Search</button>
  </form>

  <form [formGroup]="filterForm" (ngSubmit)="onFilter()">
    <div class="form-group">
      <label for="minRating">Min Rating</label>
      <input id="minRating" formControlName="minRating" type="number" class="form-control" />
    </div>
    <div class="form-group">
      <label for="maxRating">Max Rating</label>
      <input id="maxRating" formControlName="maxRating" type="number" class="form-control" />
    </div>
    <button type="submit" class="btn btn-primary">Filter</button>
  </form>

  <!-- Excursions Table -->
  <table class="table">
    <thead>
    <tr>
      <th>Name</th>
      <th>Description</th>
      <th>imgPath</th>
      <th>Date and Time</th>
      <th>Location</th>
      <th>Capacity</th>
      <th>rating</th>
      <th>Actions</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let excursion of excursions">
      <td>{{ excursion.name }}</td>
      <td>{{ excursion.description }}</td>
      <td>{{ excursion.imgPath }}</td>
      <td>{{ excursion.dateTime | date:'short' }}</td>
      <td>{{ excursion.location }}</td>
      <td>{{ excursion.capacity }}</td>
      <td>{{ excursion.rating }}</td>
      <td>
        <button (click)="onUpdate(excursion.id, excursion)" class="btn btn-warning">Update</button>
        <button (click)="onDelete(excursion.id)" class="btn btn-danger">Delete</button>
        <button (click)="onBook(excursion.id)" class="btn btn-primary">Book</button>
      </td>
    </tr>
    </tbody>
  </table>

  <div *ngIf="selectedExcursion">
    <h3>Book Excursion: {{ selectedExcursion.name }}</h3>
    <form [formGroup]="bookingForm" (ngSubmit)="onConfirmBooking()">
      <div class="form-group">
        <label for="userName">Your Name</label>
        <input id="userName" formControlName="userName" class="form-control" />
      </div>
      <div class="form-group">
        <label for="userEmail">Your Email</label>
        <input id="userEmail" formControlName="userEmail" class="form-control" />
      </div>
      <button type="submit" class="btn btn-success">Confirm Booking</button>
    </form>
  </div>
</div>

<app-add-excursion-component></app-add-excursion-component>
