<app-nav-bar></app-nav-bar>

<section class="hero">
  <div class="overlay">
    <h1>Explore Our Events</h1>
    <section class="search-container">
      <div class="search-bg">
        <div class="search-content" [formGroup]="searchForm">
          <div class="search-item">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/d3aaac8b5c6e706ec34c97b35ae12e6cb1834d548e23419f330120c04622c3da?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Location icon" class="search-icon" />
            <div class="search-details">
              <div class="search-label">
                <span>Event Name</span>
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/597af135d1bd4c818a63dc1fee048dbb904329bdb26df24085196be9450af2aa?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Dropdown icon" class="dropdown-icon" />
              </div>
              <input type="text" formControlName="name" placeholder="Enter Event Name" class="search-input">
            </div>
          </div>
          <div class="search-divider"></div>
          <div class="search-item">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/365ead1eaab23632403ba2eadeb19b4379e73d4bba81a7f218bf6e1e97498b61?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Category icon" class="search-icon" />
            <div class="search-details">
              <div class="search-label">
                <span>Category</span>
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/597af135d1bd4c818a63dc1fee048dbb904329bdb26df24085196be9450af2aa?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Dropdown icon" class="dropdown-icon" />
              </div>
              <input type="text" formControlName="category" placeholder="Enter Category" class="search-input">
            </div>
          </div>
          <button class="search-button" (click)="searchEvents()" aria-label="Search">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/9990986f798c21cceb1b1d3fad20c575fc5fdc4602f9e8c8b17aed5e6d776fff?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Search icon" class="search-icon" />
          </button>
        </div>
      </div>
    </section>


    <section class="filter-container" style="margin-top:30px">
      <div class="filter-bg">
        <div class="filter-content" [formGroup]="filterForm">
          <div class="filter-item">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/9990986f798c21cceb1b1d3fad20c575fc5fdc4602f9e8c8b17aed5e6d776fff?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Price icon" class="filter-icon" />
            <div class="filter-details">
              <div class="filter-label">
                <span>Min Price</span>
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/597af135d1bd4c818a63dc1fee048dbb904329bdb26df24085196be9450af2aa?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Dropdown icon" class="dropdown-icon" />
              </div>
              <input type="number" formControlName="minPrice" placeholder="Enter Min Price" class="filter-input">
            </div>
          </div>
          <div class="filter-divider"></div>
          <div class="filter-item">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/9990986f798c21cceb1b1d3fad20c575fc5fdc4602f9e8c8b17aed5e6d776fff?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Price icon" class="filter-icon" />
            <div class="filter-details">
              <div class="filter-label">
                <span>Max Price</span>
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/597af135d1bd4c818a63dc1fee048dbb904329bdb26df24085196be9450af2aa?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Dropdown icon" class="dropdown-icon" />
              </div>
              <input type="number" formControlName="maxPrice" placeholder="Enter Max Price" class="filter-input">
            </div>
          </div>
          <div class="filter-divider"></div>
          <div class="filter-item">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/365ead1eaab23632403ba2eadeb19b4379e73d4bba81a7f218bf6e1e97498b61?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Rating icon" class="filter-icon" />
            <div class="filter-details">
              <div class="filter-label">
                <span>Min Rating</span>
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/597af135d1bd4c818a63dc1fee048dbb904329bdb26df24085196be9450af2aa?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Dropdown icon" class="dropdown-icon" />
              </div>
              <input type="number" formControlName="minRating" placeholder="Enter Min Rating" class="filter-input">
            </div>
          </div>
          <div class="filter-divider"></div>
          <div class="filter-item">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/365ead1eaab23632403ba2eadeb19b4379e73d4bba81a7f218bf6e1e97498b61?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Rating icon" class="filter-icon" />
            <div class="filter-details">
              <div class="filter-label">
                <span>Max Rating</span>
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/597af135d1bd4c818a63dc1fee048dbb904329bdb26df24085196be9450af2aa?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Dropdown icon" class="dropdown-icon" />
              </div>
              <input type="number" formControlName="maxRating" placeholder="Enter Max Rating" class="filter-input">
            </div>
          </div>
          <button class="filter-button" (click)="onFilter()" aria-label="Filter">
            <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/9990986f798c21cceb1b1d3fad20c575fc5fdc4602f9e8c8b17aed5e6d776fff?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Filter icon" class="filter-icon" />
          </button>
        </div>
      </div>
    </section>



  </div>
</section>

<section class="events-container">
  <header class="events-header">
    <h2 class="events-title">Our Events</h2>
  </header>

  <div *ngIf="isLoading" class="loading-message">Loading events...</div>

  <div *ngIf="events.length > 0; else noEvents">
    <div class="events-list">
      <article class="event-card" *ngFor="let event of events">
        <img [src]="event.imgPath" class="event-image" alt="{{ event.name }}" />

        <div class="event-details">
          <h3 class="event-name">{{ event.name }}</h3>
          <p class="event-description">{{ event.description }}</p>
          <p class="event-date">{{ event.date | date: 'shortDate' }}</p>
          <p class="event-location">{{ event.location }}</p>
          <p class="event-capacity">Capacity: {{ event.capacity }}</p>
          <p class="event-price">{{ event.price | currency }}</p>
          <p class="event-rating">{{ event.rating }} â˜…</p>
          <p class="event-distance">{{ event.distance }} km</p>
          <p class="event-category">Category: {{ event.category }}</p>
          <div style="margin-top: 40px">
            <button class="button-book" (click)="prepareBooking(event)">Book now</button>
          </div>
          </div>
      </article>
    </div>
  </div>

  <ng-template #noEvents>
    <p>No events available.</p>
  </ng-template>
</section>


<section class="booking-section" #bookingSection>
  <h1 class="heading">Book Now!</h1>
  <div class="wrapper-content">
    <div class="layout-columns">
      <div class="column">
        <form class="form-booking" (ngSubmit)="bookEvent()">
          <h2 class="heading-form">Event Details</h2>
          <div class="group-form">
            <label for="personCount" class="label-form">Number of Persons</label>
            <input type="number" id="personCount" class="input-form" [(ngModel)]="bookingData.numberOfPerson" name="personCount" placeholder="Input number of persons" required />
          </div>
          <div class="group-form">
            <label for="dateTime" class="label-form">Date & Time</label>
            <input type="date" id="dateTime" class="input-form" [(ngModel)]="bookingData.dateTime" name="dateTime" required />
          </div>
          <button type="submit" class="button-book">Book Now!</button>
        </form>
        <div *ngIf="confirmationMessage" class="confirmation-message">
          <p>{{ confirmationMessage }}</p>
        </div>
        <div *ngIf="errorMessage" class="error-message">
          <p>{{ errorMessage }}</p>
        </div>
      </div>

    </div>

    <div *ngIf="bookingConfirmed" class="review-section">
      <h3 class="heading-form">Rate the Event</h3>
      <div class="rating">
        <div class="rating-star" *ngFor="let star of stars; let i = index">
      <span
        class="material-icons"
        [class.filled]="i < review.rating"
        (click)="setRating(i + 1)"
      >
        star
      </span>
          <span
            class="material-icons"
            [class.empty]="i >= review.rating"
            (click)="setRating(i + 1)"
          >
        star_border
      </span>
        </div>
      </div>
      <textarea
        class="input-form"
        [(ngModel)]="review.comment"
        name="reviewComment"
        placeholder="Leave your comment"
      ></textarea>
      <button type="button" class="button-book" (click)="saveReview()">Submit Review</button>
      <div *ngIf="reviewMessage" class="review-message">
        <p>{{ reviewMessage }}</p>
      </div>
    </div>


     <div class="column">
        <article class="card-event">
          <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/4eaea4a79370e36d896c5d488f04ad6371dbefc2208d4a3dcb8f5ff62c9fd2b7?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="Event location" class="image-event" />
          <div class="details-event">
            <h3 class="heading-event">Agadir, Timitar</h3>
            <div class="rating">
              <div class="rating-star">
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/5b5554aaf58006776f6cde68d571ea9a711c12986cad7a8a867253c7c36a16bc?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="star" class="icon-star" />
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/5b5554aaf58006776f6cde68d571ea9a711c12986cad7a8a867253c7c36a16bc?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="star" class="icon-star" />
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/5b5554aaf58006776f6cde68d571ea9a711c12986cad7a8a867253c7c36a16bc?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="star" class="icon-star" />
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/5b5554aaf58006776f6cde68d571ea9a711c12986cad7a8a867253c7c36a16bc?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="star" class="icon-star" />
                <img src="https://cdn.builder.io/api/v1/image/assets/TEMP/5b5554aaf58006776f6cde68d571ea9a711c12986cad7a8a867253c7c36a16bc?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" alt="star" class="icon-star" />
              </div>
            </div>
            <p class="count-review" style="margin-top: 25px;">(0 reviews)</p>
            <p class="count" style="margin-top: 25px;">From $800</p>

          </div>
        </article>
      </div>
    </div>
</section>

<section class="subscribe-section">
  <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/e9829732528809e029a3e754174143e7bf3373e8d07689dff1af3d8b7b880cae?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" class="background-image" alt="" />
  <div class="content-wrapper">
    <h2 class="subscribe-text">
      Subscribe to get information, latest news and other interesting offers about us
    </h2>
    <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/8c9710e0c4ea694149d81accc7f0157d6c4438d44ffd57172792c85480114a35?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" class="decorative-image" alt="" />
  </div>
  <form class="form-container">
    <div class="input-wrapper">
      <img loading="lazy" src="https://cdn.builder.io/api/v1/image/assets/TEMP/03aae23473b09ad935442d51c0961a46c9083d90371253daab99c7e3eee5e7fe?placeholderIfAbsent=true&apiKey=af169940446d48718e0b8026890b04d0" class="email-icon" alt="" />
      <label for="emailInput" class="visually-hidden">Your email</label>
      <input type="email" id="emailInput" class="email-input" placeholder="Your email" aria-label="Your email" required />
    </div>
    <button type="submit" class="subscribe-button">Subscribe</button>
  </form>
</section>

<!--<form [formGroup]="searchForm" (ngSubmit)="searchEvents()">-->
<!--  <div class="form-group">-->
<!--    <label for="name">Event Name</label>-->
<!--    <input type="text" id="name" formControlName="name" class="form-control">-->
<!--  </div>-->

<!--  <div class="form-group">-->
<!--    <label for="category">Category</label>-->
<!--    <select id="category" formControlName="category" class="form-control">-->
<!--      <option value="">Select Category</option>-->
<!--      <option *ngFor="let category of categories" [value]="category">{{ category }}</option>-->
<!--    </select>-->
<!--  </div>-->

<!--  <div class="form-group">-->
<!--    <label for="distance">Max Distance (km)</label>-->
<!--    <input type="number" id="distance" formControlName="distance" class="form-control">-->
<!--  </div>-->

<!--  <button type="submit" class="btn btn-primary">Search</button>-->
<!--</form>-->


<!--<form [formGroup]="filterForm" (ngSubmit)="onFilter()">-->
<!--  <div>-->
<!--    <label for="minPrice">Min price:</label>-->
<!--    <input id="minPrice" formControlName="minPrice" type="number">-->
<!--  </div>-->

<!--  <div>-->
<!--    <label for="maxPrice">Max Price:</label>-->
<!--    <input id="maxPrice" formControlName="maxPrice" type="number">-->
<!--  </div>-->

<!--  <div>-->
<!--    <label for="minRating">Min rating:</label>-->
<!--    <input id="minRating" formControlName="minRating" type="number">-->
<!--  </div>-->

<!--  <div>-->
<!--    <label for="maxRating">Max rating:</label>-->
<!--    <input id="maxRating" formControlName="maxRating" type="number">-->
<!--  </div>-->

<!--  <div>-->
<!--    <label for="maxDistance">Max Distance:</label>-->
<!--    <input id="maxDistance" formControlName="maxDistance" type="number">-->
<!--  </div>-->

<!--  <button type="submit">Filter</button>-->
<!--</form>-->
<app-footer></app-footer>
